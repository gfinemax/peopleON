# ğŸ“‘ [PRD v2.1] ì§€ì—­ì£¼íƒì¡°í•© ì˜¬ì¸ì› CRM & ERP "People On"

| í”„ë¡œì íŠ¸ ì •ë³´ | ë‚´ìš© |
| :--- | :--- |
| **í”„ë¡œì íŠ¸ëª…** | People On (í”¼í”Œ ì˜¨) |
| **ë²„ì „** | **v2.1 (Schema Integrated)** |
| **ì‘ì„±/ê´€ë¦¬** | Antigravity (PM: íŒŒì¸ë§¥ìŠ¤) |
| **í•µì‹¬ ì»¨ì…‰** | **"ì¬ë¬´(ERP)ì™€ ê´€ê³„(CRM)ì˜ í†µí•©"**<br>í˜„ì¬ êµ¬ì¶•ëœ ì¡°í•©ì› DBë¥¼ ê¸°ë°˜ìœ¼ë¡œ, ìê¸ˆ íë¦„ê³¼ ìƒë‹´ ì´ë ¥ì„ ì—°ê²°í•˜ëŠ” ì‹œìŠ¤í…œ |
| **í”Œë«í¼** | **Adaptive Web UI** (Desktop Admin + Smartphone optimized view) |

---

## 1. ë°°ê²½ ë° í•´ê²° ê³¼ì œ (Problem & Context)

### 1.1 "íœ˜ë°œë˜ëŠ” íˆìŠ¤í† ë¦¬" (Context Loss)
* **ë¬¸ì œ:** ë‹´ë‹¹ì ë³€ê²½ ì‹œ ì¡°í•©ì›ê³¼ì˜ ê³¼ê±° ì•½ì†(í™˜ë¶ˆ êµ¬ë‘ í•©ì˜ ë“±)ì´ë‚˜ ê°ˆë“± ìƒí™©ì´ ìœ ì‹¤ë¨.
* **í˜„í™©:** ì—‘ì…€ì—ëŠ” ë‚©ë¶€ì•¡ë§Œ ê¸°ë¡ë˜ì–´ ìˆì–´, "ì§€ë‚œë‹¬ íŒ€ì¥ì´ í•´ê²°í•´ì£¼ê¸°ë¡œ í–ˆë‹¤"ëŠ” ì£¼ì¥ì„ ê²€ì¦í•  ìˆ˜ ì—†ìŒ.
* **í•´ê²°:** í†µí™”, ë¯¸íŒ…, ë¬¸ì ë“± ëª¨ë“  ì ‘ì (Touchpoint)ì„ **íƒ€ì„ë¼ì¸**ìœ¼ë¡œ ê¸°ë¡í•˜ì—¬ ì˜êµ¬ ë³´ì¡´.

### 1.2 "ì •ì ì¸ ë¶„ë¥˜ì˜ í•œê³„" (Static vs Dynamic)
* **ë¬¸ì œ:** ë‹¨ìˆœ 'ì¡°í•©ì›' ëª…ë¶€ë§Œìœ¼ë¡œëŠ” ì†Œì†¡ ìœ„í—˜ì´ë‚˜ í˜‘ì¡° ì„±í–¥ íŒŒì•…ì´ ë¶ˆê°€ëŠ¥.
* **í•´ê²°:** ìƒë‹´ ê¸°ë¡ ê¸°ë°˜ AI íƒœê¹…(`#ê°•ì„±ë¯¼ì›`, `#ë‚©ë¶€ì•½ì •`)ìœ¼ë¡œ íšŒì›ì„ ë™ì ìœ¼ë¡œ ë¶„ë¥˜.

### 1.3 "ë¹„íš¨ìœ¨ì  í–‰ì •" (Operational Bottleneck)
* **ë¬¸ì œ:** ë¯¸ë‚© ì•ˆë‚´ ë¬¸ìë‚˜ ì£¼ì†Œ ë¼ë²¨ ì¶œë ¥ì„ ìœ„í•´ ë§¤ë²ˆ ì—‘ì…€ì„ ê°€ê³µí•´ì•¼ í•˜ëŠ” ë¹„íš¨ìœ¨ ë°œìƒ.
* **í•´ê²°:** ì‹œìŠ¤í…œ ë‚´ì—ì„œ ì›í´ë¦­ìœ¼ë¡œ **ë¬¸ì ë°œì†¡** ë° **ë¼ë²¨ ì¶œë ¥(PDF)** ê¸°ëŠ¥ ì œê³µ.

---

## 2. í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)

### 2.1 [CRM] í†µí•© ì•¡í‹°ë¹„í‹° íƒ€ì„ë¼ì¸
* **í†µí™”/ë¯¸íŒ… ë¡œê·¸:** ì–¸ì œ, ëˆ„êµ¬ì™€, ë¬´ìŠ¨ ëŒ€í™”ë¥¼ í–ˆëŠ”ì§€ ê¸°ë¡ (ëª¨ë°”ì¼ ìŒì„±â†’í…ìŠ¤íŠ¸ ì…ë ¥ ì§€ì›).
* **ë°œì†¡ ì´ë ¥:** ì•ˆë‚´ë¬¸, ë‚´ìš©ì¦ëª… ë°œì†¡ ì´ë ¥ ë° ìˆ˜ì‹  ì—¬ë¶€ ìë™ í†µí•©.
* **íˆìŠ¤í† ë¦¬ ë·°:** íŠ¹ì • ì¡°í•©ì› í´ë¦­ ì‹œ **[ê°€ì… ~ í˜„ì¬]** ëª¨ë“  ì´ë ¥ì„ ì‹œê°„ìˆœìœ¼ë¡œ í‘œì‹œ.

### 2.2 [AI] ì´ë ¥ ê¸°ë°˜ ìë™ ë¶„ë¥˜
* **ìë™ íƒœê¹…:** ìƒë‹´ ë‚´ìš©ì—ì„œ í‚¤ì›Œë“œ ì¶”ì¶œ (`#ì†Œì†¡ë¶ˆì‚¬`, `#ìê¸ˆë¶€ì¡±`) í›„ íƒœê·¸ ë¶€ì°©.
* **ë“±ê¸‰ ì¡°ì •:** "ìê¸ˆ ìœµí†µ ê°€ëŠ¥" ê¸°ë¡ ì‹œ â†’ `[ë‚©ë¶€ëŒ€ê¸°]` ë“±ìœ¼ë¡œ ìƒíƒœ ë³€ê²½ ì œì•ˆ.

### 2.3 [ERP] ë¶„ë‹´ê¸ˆ ìë™ ì²­êµ¬ ë° ìˆ˜ë‚©
* **ìë™ ì²­êµ¬:** `Tier(ì§€ì£¼/ì¼ë°˜)` Ã— `Unit(í‰í˜•)`ì— ë”°ë¥¸ ë¶„ë‹´ê¸ˆ ìë™ ê³„ì‚°.
* **ì…ê¸ˆ ë§¤ì¹­:** ì€í–‰ ì—‘ì…€ ì—…ë¡œë“œ ì‹œ ì…ê¸ˆìëª…/ë™í˜¸ìˆ˜ ë¶„ì„ í›„ ìë™ ìˆ˜ë‚© ì²˜ë¦¬.
* **ë¯¸ë‚© ê´€ë¦¬:** íšŒì°¨ë³„ ë¯¸ë‚©ì ë¦¬ìŠ¤íŠ¸ ì‹¤ì‹œê°„ ì¶”ì¶œ ë° ë…ì´‰ ë¬¸ì ì—°ë™.

### 2.4 [Ops] í–‰ì • ìë™í™”
* **ë¬¸ì ë°œì†¡:** íƒ€ê²Ÿ ê·¸ë£¹(ì˜ˆ: 3íšŒì°¨ ë¯¸ë‚©ì)ì—ê²Œ ëŒ€ëŸ‰ ë¬¸ì ë°œì†¡ ë° ì´ë ¥ ìë™ ì €ì¥.
* **ë¼ë²¨ ì¶œë ¥:** ë“±ê¸°/ì‹¤ê±°ì£¼ ì£¼ì†Œ ì„ íƒ í›„ ë¼ë²¨ì§€(í¼í… ë“±) ê·œê²© PDF ìë™ ìƒì„±.

### 2.5 [Interface] í•˜ì´ë¸Œë¦¬ë“œ ì…ë ¥ ì‹œìŠ¤í…œ
* **ğŸ“± Mobile (í˜„ì¥ ìµœì í™”):**
    *   **Dashboard:** ì „ì²´ ì¡°í•©ì› ìˆ˜, ë‚©ë¶€ìœ¨ ë“± ERP/CRM í•µì‹¬ ì§€í‘œ ì‹¤ì‹œê°„ ì—°ë™.
    *   **Finance View:** ê°œì¸ë³„/íšŒì°¨ë³„ ë‚©ë¶€ í˜„í™© ë° ë¯¸ë‚© ë‚´ì—­ ì‹¤ì‹œê°„ ì¡°íšŒ (ì§„í–‰ë¥  ê·¸ë˜í”„ í¬í•¨).
    *   **Quick Log:** í˜„ì¥ì—ì„œ ì¦‰ì‹œ í†µí™”/ë¯¸íŒ… ê¸°ë¡ ë° ìŒì„± ë©”ëª¨ ì§€ì›.
* **ğŸ’» PC (ê´€ë¦¬ ìµœì í™”):** ìƒì„¸ ìƒë‹´ ì¼ì§€ ì‘ì„±, ë…¹ì·¨/ë¬¸ì„œ íŒŒì¼ ì²¨ë¶€, ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬.

### 2.6 [UI/UX] ìƒì„¸ ì •ë³´ ì‹œê°í™” ê³ ë„í™”
*   **í´ë” íƒ­ (Folder Tabs):** íƒ­ê³¼ ì½˜í…ì¸  ë°°ê²½ì´ ì—°ê²°ë˜ëŠ” ì¼ì²´í˜• ë””ìì¸ìœ¼ë¡œ ëª°ì…ê° ì œê³µ (ì¡°ëª… íš¨ê³¼ í¬í•¨).
*   **ì…ë ¥ í¸ì˜ì„±:** ìƒë‹´ ë‚´ì—­ ì…ë ¥ ì‹œ 'ìŒì„± ì¸ì‹' ì•„ì´ì½˜ ì œê³µ ë° ì§ê´€ì ì¸ ì‘ì„± ì°½ ë°°ì¹˜.
*   **ê°€ë…ì„± ê°œì„ :** ë‚©ë¶€ í˜„í™© í…Œì´ë¸”ì˜ ë¶ˆí•„ìš”í•œ ê³µë°± ì œê±° ë° ìš©ì–´ ìˆœí™” ('ìˆ˜ë‚©ì™„ë£Œ' -> 'ì™„ë£Œ').

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜ (Supabase Schema)

### âœ… 3.1 í˜„ì¬ êµ¬í˜„ëœ ìŠ¤í‚¤ë§ˆ (Implemented)
> *Step 1 (ì¡°í•©ì›), Step 2 (ê³¼ê±°ì´ë ¥) ì½”ë“œë¥¼ í†µí•´ êµ¬ì¶•ëœ í…Œì´ë¸”*

## 1. í˜„ì¬ êµ¬ì¶•ëœ í…Œì´ë¸” (Active Schema)
> **ìƒíƒœ:** âœ… êµ¬í˜„ ì™„ë£Œ (Step 1, Step 2 ìŠ¤í¬ë¦½íŠ¸ ì—°ë™)

### â‘  `members` (í†µí•© ì¸ëª…ë¶€)
ì‹œìŠ¤í…œì˜ ë§ˆìŠ¤í„° ë°ì´í„°ì…ë‹ˆë‹¤. ì¡°í•©ì›, íˆ¬ìì, ì¼ë°˜ë¶„ì–‘ì ë“± ëª¨ë“  ì¸ì›ì´ ì´ê³³ì— ë“±ë¡ë©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì (PK) | ìë™ ìƒì„± (`gen_random_uuid()`) |
| `name` | `text` | ì„±ëª… | |
| `phone` | `text` | íœ´ëŒ€ì „í™”ë²ˆí˜¸ | **ì‹ë³„ í‚¤** (í•˜ì´í”ˆ, ê³µë°± ì œê±°) |
| `member_number` | `text` | ì¡°í•©ì› ë²ˆí˜¸ / ë™í˜¸ìˆ˜ | ì˜ˆ: '101-1004' |
| `tier` | `text` | ë“±ê¸‰ ë¶„ë¥˜ | '1ì°¨', 'ì§€ì£¼', '2ì°¨', 'íˆ¬ìì' ë“± |
| `status` | `text` | í˜„ì¬ ìƒíƒœ | 'ì •ìƒ', 'ì†Œì†¡ì¤‘', 'íƒˆí‡´ì˜ˆì •', 'ì‚¬ë§' |
| `is_registered` | `boolean` | ë“±ê¸°ë¶€ ë“±ì¬ ì—¬ë¶€ | `true`: ë“±ê¸°ì¡°í•©ì›, `false`: ë¯¸ë“±ì¬ |
| `unit_group` | `text` | í‰í˜• íƒ€ì… | '59A', '59B', '84' ë“± |
| `address_legal` | `text` | ë“±ë³¸ìƒ ì£¼ì†Œ | ìš°í¸ë¬¼/ë‚´ìš©ì¦ëª… ë°œì†¡ìš© |
| `tags` | `text[]` | **ì„±í–¥ íƒœê·¸ (AI)** | ì˜ˆ: `['ì†Œì†¡ìœ„í—˜', 'ê°•ì„±ë¯¼ì›', 'ë‚©ë¶€ì•½ì •']` |
| `memo` | `text` | ë¹„ê³  í†µí•© | ì—‘ì…€ì˜ ë¹„ê³ /ê¸°íƒ€ ë‚´ìš© ë³‘í•© |
| `created_at` | `timestamptz` | ë“±ë¡ì¼ì‹œ | ìë™ ìƒì„± (`now()`) |

### â‘¡ `relationships` (ê´€ê³„ ë° ëŒ€ë¦¬ì¸)
ì¡°í•©ì›ê³¼ ì—°ê²°ëœ ê°€ì¡±, ì§€ì¸, ë²•ì  ëŒ€ë¦¬ì¸ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì | |
| `member_id` | `uuid` | **ì¡°í•©ì› ID (FK)** | `members.id` ì°¸ì¡° |
| `name` | `text` | ëŒ€ë¦¬ì¸ ì„±ëª… | |
| `phone` | `text` | ëŒ€ë¦¬ì¸ ì—°ë½ì²˜ | |
| `relation` | `text` | ê´€ê³„ | 'ë¶€', 'ëª¨', 'ë°°ìš°ì', 'ìë…€' (ìê²©ê²€ì¦ìš©) |
| `note` | `text` | ë¹„ê³  | ì˜ˆ: 'ìœ„ì„ì¥ ì ‘ìˆ˜ì™„ë£Œ', 'ì¸ê° ë¯¸ì œì¶œ' |

### â‘¢ `legacy_records` (ê³¼ê±° ì´ë ¥ ë³´ê´€)
ê¸°ì¡´ì— íŒŒí¸í™”ë˜ì–´ ìˆë˜ ì—‘ì…€ íŒŒì¼(íˆ¬ìì ëª…ë¶€, ê¶Œë¦¬ì¦ ë“±)ì˜ ë°ì´í„°ë¥¼ í†µí•© ë³´ê´€í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì | |
| `member_id` | `uuid` | **ì¡°í•©ì› ID (FK)** | `members.id` ì°¸ì¡° |
| `legacy_name` | `text` | ê³¼ê±° ëª…ë¶€ìƒ ì´ë¦„ | ë§¤ì¹­ ê²€ì¦ìš© |
| `amount_paid` | `numeric` | **ê¸°ë‚©ë¶€ ê¸ˆì•¡** | **[ERP í•µì‹¬]** ê¸°ì¡´ ë‚©ë¶€ ì´ì•¡ |
| `contract_date` | `date` | ìµœì´ˆ ê³„ì•½/ê°€ì…ì¼ | |
| `source_file` | `text` | ë°ì´í„° ì¶œì²˜ íŒŒì¼ëª… | ì˜ˆ: 'legacy_investors.xls' |

---

## 2. êµ¬í˜„ ì˜ˆì • í…Œì´ë¸” (Planned Schema)
> **ìƒíƒœ:** ğŸš§ êµ¬í˜„ ëŒ€ê¸° (Step 3 ìê¸ˆê´€ë¦¬, Step 4 CRM ë‹¨ê³„ì—ì„œ ì‚¬ìš©)

### â‘£ `interaction_logs` (CRM í™œë™ ë¡œê·¸)
í†µí™”, ë¬¸ì, ë¯¸íŒ… ë“± ì¡°í•©ì›ê³¼ì˜ ëª¨ë“  ì ‘ì ì„ ê¸°ë¡í•˜ì—¬ 'ì‚´ì•„ìˆëŠ” íˆìŠ¤í† ë¦¬'ë¥¼ ë§Œë“­ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì | |
| `member_id` | `uuid` | **ì¡°í•©ì› ID (FK)** | ëŒ€ìƒ ì¡°í•©ì› |
| `type` | `text` | í™œë™ ìœ í˜• | `CALL`(ì „í™”), `MEET`(ë¯¸íŒ…), `SMS`, `DOC` |
| `summary` | `text` | í™œë™ ë‚´ìš© | ìƒë‹´ ìš”ì•½, ìŒì„± ë³€í™˜ í…ìŠ¤íŠ¸ |
| `direction` | `text` | í†µì‹  ë°©í–¥ | `Inbound`(ìˆ˜ì‹ ), `Outbound`(ë°œì‹ ) |
| `staff_name` | `text` | ë‹´ë‹¹ ì§ì› | ê¸°ë¡ì ì‹¤ëª… |
| `attachment` | `text` | ì²¨ë¶€ íŒŒì¼ | ë…¹ì·¨ íŒŒì¼ URL, ë¬¸ì„œ ê²½ë¡œ |
| `created_at` | `timestamptz` | í™œë™ ì¼ì‹œ | |

### â‘¤ `price_tables` (í‘œì¤€ ë¶„ë‹´ê¸ˆ í…Œì´ë¸”)
í‰í˜•(Unit)ê³¼ ì°¨ìˆ˜(Step)ì— ë”°ë¥¸ í‘œì¤€ ë‚©ë¶€ ê¸ˆì•¡ ê¸°ì¤€í‘œì…ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì | |
| `tier` | `text` | ì ìš© ë“±ê¸‰ | '1ì°¨', 'ì§€ì£¼', '2ì°¨' |
| `unit` | `text` | ì ìš© í‰í˜• | '59', '84' |
| `step` | `integer` | íšŒì°¨ | 1, 2, 3... |
| `step_name` | `text` | íšŒì°¨ëª… | ì˜ˆ: 'ê³„ì•½ê¸ˆ', '1ì°¨ ì¤‘ë„ê¸ˆ' |
| `amount` | `numeric` | **ì²­êµ¬ ê¸°ì¤€ ê¸ˆì•¡** | |
| `due_date` | `date` | ë‚©ë¶€ ê¸°í•œ | ì—°ì²´ íŒë‹¨ ê¸°ì¤€ |

### â‘¥ `payments` (ê°œì¸ë³„ ë‚©ë¶€ì›ì¥)
ê°œì¸ì—ê²Œ ë°œí–‰ëœ ì‹¤ì œ ì²­êµ¬ì„œì™€ ìˆ˜ë‚© ë‚´ì—­ì„ ë§¤ì¹­í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| `id` | `uuid` | ê³ ìœ  ì‹ë³„ì | |
| `member_id` | `uuid` | **ì¡°í•©ì› ID (FK)** | |
| `step` | `integer` | íšŒì°¨ | 1, 2, 3... |
| `amount_due` | `numeric` | **ì²­êµ¬ì•¡** | `price_tables` ê¸°ì¤€ ê¸ˆì•¡ |
| `amount_paid` | `numeric` | **ì‹¤ë‚©ë¶€ì•¡** | ì€í–‰ ì…ê¸ˆ ë§¤ì¹­ ê¸ˆì•¡ |
| `paid_date` | `date` | ìˆ˜ë‚© í™•ì¸ì¼ | |
| `is_paid` | `boolean` | ì™„ë‚© ì—¬ë¶€ | `Paid >= Due` ì¡°ê±´ ì¶©ì¡± ì‹œ `true` |

---

## 3. SQL ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (Action Item)
*ì•„ë˜ ì½”ë“œë¥¼ Supabase SQL Editorì—ì„œ ì‹¤í–‰í•˜ë©´ ìœ„ í…Œì´ë¸”ë“¤ì´ ì¦‰ì‹œ ìƒì„±ë©ë‹ˆë‹¤.*

```sql
-- 1. Members í…Œì´ë¸” í™•ì¥ (AI íƒœê¹… ê¸°ëŠ¥ ì¶”ê°€)
ALTER TABLE members ADD COLUMN IF NOT EXISTS tags text[];

-- 2. CRM ë¡œê·¸ í…Œì´ë¸” ìƒì„±
CREATE TABLE IF NOT EXISTS interaction_logs (
  id uuid default gen_random_uuid() primary key,
  member_id uuid references members(id),
  type text, -- CALL, MEET, SMS, DOC
  summary text,
  direction text, -- Inbound, Outbound
  staff_name text,
  attachment text,
  created_at timestamptz default now()
);

-- 3. í‘œì¤€ ê°€ê²©í‘œ í…Œì´ë¸” ìƒì„±
CREATE TABLE IF NOT EXISTS price_tables (
  id uuid default gen_random_uuid() primary key,
  tier text, -- 1ì°¨, ì§€ì£¼...
  unit text, -- 59, 84...
  step integer, -- 1, 2...
  step_name text,
  amount numeric,
  due_date date
);

-- 4. ê°œì¸ë³„ ë‚©ë¶€ì›ì¥ í…Œì´ë¸” ìƒì„±
CREATE TABLE IF NOT EXISTS payments (
  id uuid default gen_random_uuid() primary key,
  member_id uuid references members(id),
  step integer,
  amount_due numeric default 0,
  amount_paid numeric default 0,
  paid_date date,
  is_paid boolean default false,
  created_at timestamptz default now()
);